(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[3],{106:function(e,t,n){e.exports=n(171)},111:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(8),a=n.n(i),c=(n(111),n(3)),u=n(17),l=n(96),s=n.n(l),p=n(26),f=n(18),b=n(172),m=n(62),y=n(67);function h(){var e=Object(u.a)(["\n     margin-left:auto;\n"]);return h=function(){return e},e}function g(){var e=Object(u.a)(["\n    margin-left:10px;\n"]);return g=function(){return e},e}function O(){var e=Object(u.a)(["\n    color:#fff;\n    margin-left:30px;\n\n\n    // \u7ed9\u81ea\u5df1\u52a0 & \u76f8\u5f53\u4e8e\u81ea\u5df1\uff0c\u7ed9\u6bcf\u4e2anavLink \u52a0\n    &.active{\n        border-bottom:1px solid #fff;\n    }\n"]);return O=function(){return e},e}function j(){var e=Object(u.a)(["\n    height:30px;\n"]);return j=function(){return e},e}function d(){var e=Object(u.a)(["\ndisplay:flex;\nalign-items:center;\nbackground-color: #02101f;\npadding:10px 100px;\ncolor:#fff;\n"]);return d=function(){return e},e}var v=f.a.header(d()),w=f.a.img(j()),U=Object(f.a)(p.b)(O()),P=Object(f.a)(b.a)(g()),E=f.a.div(h()),k=Object(y.a)((function(){var e=Object(m.a)(),t=e.userStore,n=e.authStore,r=Object(c.f)();return o.a.createElement(v,null,o.a.createElement(w,{src:s.a,alt:"logo"}),o.a.createElement("nav",null,o.a.createElement(U,{activeClassName:"active",to:"/",exact:!0},"\u9996\u9875"),o.a.createElement(U,{activeClassName:"active",to:"/history"},"\u5386\u53f2"),o.a.createElement(U,{activeClassName:"active",to:"/about"},"\u5173\u4e8e")),o.a.createElement(E,null,t.currentUser?o.a.createElement(o.a.Fragment,null,t.currentUser.attributes.username," ",o.a.createElement(P,{type:"primary",onClick:function(){n.logOut()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{type:"primary",onClick:function(){r.push("/login")}},"\u767b\u5f55"),o.a.createElement(P,{type:"primary",onClick:function(){r.push("/register")}},"\u6ce8\u518c"))))}));function z(){var e=Object(u.a)(["\n    padding:10px 100px;\n    text-align:center;\n    font-size:12px;\n    color:#aaa;\n"]);return z=function(){return e},e}var x=f.a.footer(z());var L=function(){return o.a.createElement(x,null,"@copyright 2020 sheilaTing")};var D=function(){return o.a.createElement("div",null,"Loadding")},F=(n(170),Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(10)]).then(n.bind(null,352))}))),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(9)]).then(n.bind(null,353))})),C=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,344))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,345))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,346))}));var T=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement(c.c,null,o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(D,null)},o.a.createElement(c.a,{path:"/",exact:!0},o.a.createElement(F,null)),o.a.createElement(c.a,{path:"/history",component:S}),o.a.createElement(c.a,{path:"/about",component:C}),o.a.createElement(c.a,{path:"/login",component:I}),o.a.createElement(c.a,{path:"/register",component:M})))),o.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(p.a,null,o.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),o=n(6),i=n(19),a=n(20),c=n(2),u=(n(40),n(1)),l=n(13),s=n.n(l);n(112);s.a.init({appId:"TfCR5MV0xL388sGuQA7XBDSK-gzGzoHsz",appKey:"voR91aKAmhzQP03CzPHr4d9C",serverURL:"https://tfcr5mv0.lc-cn-n1-shared.com"});var p,f,b,m,y,h,g,O,j,d,v,w,U,P,E,k,z,x=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},L=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},D=function(){l.User.logOut()},F=function(){return l.User.current()},S=function(e,t){var n=new s.a.Object("Image"),r=new s.a.File(t,e);return n.set("file",r),n.set("filename",t),n.set("owner",s.a.User.current()),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},C=function(e){var t=e.page,n=void 0===t?1:t,r=e.limit,o=void 0===r?10:r,i=new s.a.Query("Image");return i.include("owner"),i.limit(o),i.skip((n-1)*o),i.descending("createdAt"),i.equalTo("owner",s.a.User.current()),new Promise((function(e,t){i.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},I=new(p=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"currentUser",f,this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=F()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(p.prototype,"currentUser",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(p.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),M=n(173),T=new(b=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"page",m,this),Object(o.a)(this,"limit",y,this),Object(o.a)(this,"isLoadding",h,this),Object(o.a)(this,"list",g,this),Object(o.a)(this,"hasMore",O,this)}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoadding=!0,C({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){M.a.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoadding=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoadding=!1,this.hasMore=!0,this.page=0}}]),e}(),m=Object(c.a)(b.prototype,"page",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=Object(c.a)(b.prototype,"limit",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=Object(c.a)(b.prototype,"isLoadding",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=Object(c.a)(b.prototype,"list",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Object(c.a)(b.prototype,"hasMore",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(c.a)(b.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"append"),b.prototype),Object(c.a)(b.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"find"),b.prototype),Object(c.a)(b.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"reset"),b.prototype),b),A=new(j=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"filename",d,this),Object(o.a)(this,"file",v,this),Object(o.a)(this,"isUploading",w,this),Object(o.a)(this,"serverFile",U,this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,new Promise((function(t,n){S(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.log("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),d=Object(c.a)(j.prototype,"filename",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(c.a)(j.prototype,"file",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(c.a)(j.prototype,"isUploading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object(c.a)(j.prototype,"serverFile",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(j.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"setFilename"),j.prototype),Object(c.a)(j.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"setFile"),j.prototype),Object(c.a)(j.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"upload"),j.prototype),Object(c.a)(j.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"reset"),j.prototype),j),B=new(P=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"isLogin",E,this),Object(o.a)(this,"isLoadding",k,this),Object(o.a)(this,"values",z,this)}return Object(a.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){L(e.values.username,e.values.password).then((function(e){console.log("\u767b\u5f55\u6210\u529f"),I.pullUser(),t(e)})).catch((function(e){console.log("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){x(e.values.username,e.values.password).then((function(e){console.log("\u6ce8\u518c\u6210\u529f"),I.pullUser(),t(e)})).catch((function(e){console.log("\u6ce8\u518c\u5931\u8d25"),I.resetUser(),n(e)}))}))}},{key:"logOut",value:function(){D(),I.resetUser(),T.reset(),A.reset()}}]),e}(),E=Object(c.a)(P.prototype,"isLogin",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=Object(c.a)(P.prototype,"isLoadding",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(c.a)(P.prototype,"values",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"Tingting",password:""}}}),Object(c.a)(P.prototype,"setIsLogin",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"setIsLogin"),P.prototype),Object(c.a)(P.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"setPassword"),P.prototype),Object(c.a)(P.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"setUsername"),P.prototype),Object(c.a)(P.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"login"),P.prototype),Object(c.a)(P.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"register"),P.prototype),Object(c.a)(P.prototype,"logOut",[u.f],Object.getOwnPropertyDescriptor(P.prototype,"logOut"),P.prototype),P),K=Object(r.createContext)({authStore:B,userStore:I,imageStore:A,historyStore:T});window.stores={authStore:B,userStore:I,imageStore:A,historyStore:T};var N=function(){return Object(r.useContext)(K)}},96:function(e,t,n){e.exports=n.p+"static/media/icon.58f63ef9.jpg"}},[[106,4,5]]]);
//# sourceMappingURL=main.ea16ff64.chunk.js.map