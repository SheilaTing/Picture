{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","img","Component","observer","historyStore","useStores","useEffect","console","log","reset","initialLoad","pageStart","loadMore","find","hasMore","isLoadding","useWindow","dataSource","list","renderItem","item","Item","key","id","src","attributes","file","url","filename","target","href","className","tip","History","List"],"mappings":"+VAQA,IAAMA,EAAMC,IAAOC,IAAV,KA8DMC,EAvDGC,aAAS,WAAO,IACtBC,EAAiBC,cAAjBD,aAiBR,OARAE,qBAAU,WAEN,OADAC,QAAQC,IAAI,4BACN,WACFD,QAAQC,IAAI,gBACZJ,EAAaK,WAEnB,IAGE,6BACI,kBAAC,IAAD,CACIC,aAAa,EACbC,UAAW,EACXC,SAnBK,WACbR,EAAaS,QAmBLC,SAAUV,EAAaW,YAAcX,EAAaU,QAClDE,WAAW,GAEX,kBAAC,IAAD,CACIC,WAAYb,EAAac,KACzBC,WAAY,SAAAC,GAAI,OACZ,kBAAC,IAAKC,KAAN,CAAWC,IAAKF,EAAKG,IACjB,6BACI,kBAACxB,EAAD,CAAKyB,IAAOJ,EAAKK,WAAWC,KAAKD,WAAWE,OAEhD,6BACC,4BAAKP,EAAKK,WAAWG,WAEtB,6BACR,uBAAGC,OAAO,SAASC,KAAMV,EAAKK,WAAWC,KAAKD,WAAWE,KAAMP,EAAKK,WAAWC,KAAKD,WAAWE,SAM9FvB,EAAaW,YAAcX,EAAaU,SACrC,yBAAKiB,UAAU,0BACX,kBAAC,IAAD,CAAMC,IAAI,8BClDvBC,UATf,WACI,OACI,oCACI,uCACA,kBAACC,EAAD","file":"static/js/9.9bd3a4fc.chunk.js","sourcesContent":["import React,{useEffect} from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStores } from '../stores';\r\nimport styled from 'styled-components';\r\nimport { List, Spin } from 'antd';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\n\r\n// 设置图片大小\r\nconst Img = styled.img`\r\n    width:100px;\r\n    height:120px;\r\n    object-fit :contain;\r\n    border:1px solid #eee;\r\n`;\r\n\r\nconst Component = observer(() => {\r\n    const { historyStore } = useStores();\r\n\r\n    //加载更多方法\r\n    const loadMore = ()=>{\r\n        historyStore.find();\r\n    };\r\n\r\n    // 使用 useEffect 在组件挂载时重新加载，卸载时把数据清空\r\n\r\n    useEffect(()=>{\r\n        console.log('进入组件');\r\n        return()=>{\r\n            console.log('卸载');\r\n            historyStore.reset();\r\n        }\r\n    },[]);  // 第二个参数为空数组,不监控任何state值，只执行一次\r\n\r\n    return (\r\n        <div>\r\n            <InfiniteScroll\r\n                initialLoad={true}\r\n                pageStart={1}\r\n                loadMore={loadMore}\r\n                hasMore={!historyStore.isLoadding && historyStore.hasMore}\r\n                useWindow={true}\r\n            >\r\n                <List\r\n                    dataSource={historyStore.list}\r\n                    renderItem={item => (\r\n                        <List.Item key={item.id}>\r\n                            <div>\r\n                                <Img src = {item.attributes.file.attributes.url}/>\r\n                            </div>\r\n                            <div>\r\n                             <h5>{item.attributes.filename}</h5>\r\n                            </div>\r\n                            <div>\r\n                    <a target=\"_blank\" href={item.attributes.file.attributes.url}>{item.attributes.file.attributes.url}</a>\r\n                            </div>\r\n                          \r\n                        </List.Item>\r\n                    )}\r\n                >\r\n                    {historyStore.isLoadding && historyStore.hasMore && (\r\n                        <div className=\"demo-loading-container\">\r\n                            <Spin tip=\"加载中\"/>\r\n                        </div>\r\n                    )}\r\n                </List>\r\n            </InfiniteScroll>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default Component;","import React from 'react';\r\nimport List from '../components/List';\r\nfunction History(){\r\n    return(\r\n        <>\r\n            <h1>History</h1>\r\n            <List></List>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default History;"],"sourceRoot":""}